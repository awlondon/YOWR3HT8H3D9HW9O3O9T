<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HLSF Cognition Engine v2.0</title>
  
</head>
<body>
  <div id="api-modal" class="modal">
    <div class="modal-content" role="dialog" aria-modal="true">
      <h2>Enter OpenAI API Key</h2>
      <p>Provide your OpenAI API key (sk-...) to begin using the HLSF Cognition Engine.</p>
      <input id="api-key-input" type="password" placeholder="sk-..." />
      <div class="modal-actions">
        <button id="api-cancel" class="pill-button secondary">Continue offline</button>
        <button id="api-confirm" class="pill-button primary">Save key</button>
      </div>
      <small style="opacity:0.65">‚ö†Ô∏è Note: Download this HTML file and run locally for API calls to work.</small>
    </div>
  </div>

  <div id="app">
    <div id="header">
      <div>HLSF Cognition Engine v2.0</div>
      <div class="header-stats">
        <div class="stat-item">
          <span class="stat-label">Cache Hit Rate</span>
          <span class="stat-value" id="cache-hit-rate">‚Äî</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Cached Tokens</span>
          <span class="stat-value" id="cached-tokens">‚Äî</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Session Cost</span>
          <span class="stat-value" id="session-cost">$0.00</span>
        </div>
      </div>
    </div>
    <div id="log"></div>
    <div id="input-area">
      <input id="command-input" type="text" placeholder="> Enter a prompt or /command" maxlength="600" autocomplete="off" />
      <div class="button-group">
        <button id="cancel-btn" class="btn btn-secondary" style="display: none;">Cancel</button>
        <button id="send-btn" class="btn btn-primary">Send</button>
      </div>
    </div>
    <input id="db-file" type="file" accept=".json,application/json" style="display:none">
    <input id="read-file" type="file" accept=".txt,text/plain,.pdf,application/pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document" style="display:none">
    <div class="hlsf-canvas-container" id="hlsf-canvas-container">
      <div class="section-title">üî≠ HLSF Matrix Visualizer</div>
      <details id="hlsf-batch-log" open>
        <summary>Batch log</summary>
        <div id="hlsf-log-progress">
          <div id="hlsf-log-bar"></div>
        </div>
        <pre id="hlsf-log-stream"></pre>
        <button id="hlsf-log-download">Download log</button>
      </details>
      <div id="hlsf-loading-panel" class="hlsf-loading-panel hidden" role="status" aria-live="polite" aria-hidden="true">
        <div class="processing-indicator">
          <div class="spinner"></div>
          <span id="hlsf-loading-label">Preparing HLSF visualization‚Ä¶</span>
        </div>
        <div class="hlsf-loading-bar">
          <div id="hlsf-loading-progress" class="hlsf-loading-progress"></div>
        </div>
        <div id="hlsf-loading-detail" class="hlsf-loading-detail">This can take a few seconds for large datasets.</div>
      </div>
      <canvas id="hlsf-canvas"></canvas>
      <div class="hlsf-controls">
        <div class="hlsf-control-group">
          <label for="hlsf-rotation-speed">Emergent rotation speed <span id="hlsf-speed-val">0.00</span></label>
          <input id="hlsf-rotation-speed" type="range" min="-5" max="5" step="0.01" value="0.30">
        </div>
        <div class="hlsf-control-group">
          <label for="hlsf-alpha">Alpha <span id="hlsf-alpha-val">0.70</span></label>
          <input id="hlsf-alpha" type="range" min="0" max="0.99" step="0.01" value="0.70">
        </div>
        <div class="hlsf-control-group">
          <label>Edge width <span id="edgew-val">0.200</span></label>
          <input id="edgew" type="range" min="0.01" max="1.00" step="0.005" value="0.200">
        </div>
        <div class="hlsf-control-group">
          <label for="hlsf-node-size">Node size <span id="hlsf-node-size-val">1.0</span></label>
          <input id="hlsf-node-size" type="range" min="0.5" max="2.5" step="0.1" value="1.0">
        </div>
        <div class="hlsf-control-group">
          <label for="hlsf-edge-color-mode">Edge coloring</label>
          <select id="hlsf-edge-color-mode">
            <option value="theme">Theme</option>
            <option value="weight">Weight</option>
            <option value="relation" selected>Relation</option>
          </select>
        </div>
        <div class="hlsf-control-group">
          <label for="hlsf-relation-cap">Relation types <span id="hlsf-relation-cap-val">50</span></label>
          <input id="hlsf-relation-cap" type="number" min="1" max="50" step="1" value="50">
        </div>
        <div class="hlsf-control-group">
          <label for="hlsf-edges-per-type">Edges per type <span id="hlsf-edges-per-type-val">3</span></label>
          <input id="hlsf-edges-per-type" type="number" min="1" max="10" step="1" value="3">
        </div>
        <div class="hlsf-control-group">
          <label>Display options</label>
          <div class="hlsf-button-row">
            <button id="hlsf-toggle-edges" class="btn btn-secondary">Edges: On</button>
            <button id="hlsf-toggle-adjacency" class="btn btn-secondary">Adjacency: Compact</button>
            <button id="hlsf-toggle-labels" class="btn btn-secondary">Labels: Off</button>
            <button id="hlsf-toggle-glow" class="btn btn-secondary">Glow: Off</button>
            <button id="hlsf-toggle-bg" class="btn btn-secondary">BG: Dark</button>
          </div>
        </div>
        <div class="hlsf-control-group">
          <label for="hlsf-layout">Layout</label>
          <select id="hlsf-layout">
            <option value="dimension">Dimension NAM</option>
            <option value="affinity">Clusters √ó Levels</option>
            <option value="layered">Layered</option>
            <option value="legacy">Legacy</option>
          </select>
        </div>
        <div class="hlsf-control-group">
          <label for="hlsf-aff-thresh">Affinity threshold <span id="hlsf-aff-thresh-val">0.35</span></label>
          <input id="hlsf-aff-thresh" type="range" min="0.1" max="0.8" step="0.01" value="0.35">
        </div>
        <div class="hlsf-control-group">
          <label for="hlsf-aff-iters">Affinity iterations <span id="hlsf-aff-iters-val">8</span></label>
          <input id="hlsf-aff-iters" type="range" min="1" max="20" step="1" value="8">
        </div>
        <div class="hlsf-control-group full-span">
          <em id="hlsf-affinity-summary" class="hlsf-mental-summary">Current mental state: Focused yet flexible attention.</em>
        </div>
        <div class="hlsf-control-group">
          <label>Emergent rotation</label>
          <div class="hlsf-button-row">
            <button id="hlsf-toggle-emergent" class="btn btn-secondary">Stop Emergence</button>
          </div>
        </div>
        <div class="hlsf-control-group">
          <label>View</label>
          <div class="hlsf-button-row">
            <button id="hlsf-zoom-in" class="btn btn-secondary">Zoom +</button>
            <button id="hlsf-zoom-out" class="btn btn-secondary">Zoom ‚àí</button>
            <button id="hlsf-zoom-portal" class="btn btn-secondary">Portal</button>
            <button id="hlsf-reset-view" class="btn btn-secondary">Reset</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  
  <script>
    const SETTINGS = {
      tokenizeSymbols: true,
      symbolWeightScale: 0.35,
      symbolEmitMode: "paired",
      includeSymbolInSummaries: false,
    };
    window.SETTINGS = Object.assign({}, SETTINGS, window.SETTINGS || {});
  </script>
  <script type="module" src="/src/main.ts"></script>
</body>
</html>
